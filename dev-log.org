:tackling:

* Backlog

  ** Bugs
    - When repo is empty, all commands throw error
    - command var verticle overflow
    - tag search should be case insensitive
    - link and tag must be mutually exclusive
    - HTML is leading into the dom, type <button>test</button> to repro
    - Cursor position is borken after formatting
    - when not on last line, "## " will push selection to bottom
    - debug windows build bin output (may have to do with git auth)
    - Can't travel to reference panel when its empty
    - Changes in title is not being tracked as dirty
    - Newly opened window won't receive focus

  ** Intuitive modal/window management
    - Ctrl+Enter in command input to create note without closing existing

  ** Hassle-free 1st run
    - generate bookmarklet from the app
    - expose config file in web for read/write
    - type "?" to reopen help menu, show placeholder hint when command bar isn't focused
    - more verbose output in server logs

  ** Knowledge capture
    - When clipboard has content, use it as default for URL or text based capture
    - Support list 
      - syntax highlight
      - push/pull indendation, implement as a command
    - Delete note
    - Replace selection with new capture (by title or by url)
    - Unify URL and textual capture and insert. Determine type on client side.
      - Consider perf draw back though. Maybe combine search and crawl into a discover API

  ** Responsive UI
    - show save progress - need to break git actions into smaller api calls
    - consolidate remote sync status with local save status chip
    - a way to view status history
    - highlight todo and done keywords
    - show color bar on left when line has formatting issues
    - highlight part of the command options that overlap with the current input
    - highlight raw URL and make them clickable

  ** Keyboard ergonomics
    - Alt + arrow to move line(s)
    - ctrl + D to select word under cursor
    - run command directly with hotkey (require refactoring)
    - ctrl + enter to insert below, ctrl + shift enter to insert above

  ** Refactoring
    - centralize event handling: keyboard > global handler > call command or call component method
    - clean up command system architecture
      - decouple command lambda from command key binding
    - decouple formatting from syntax parsing
    - refactor search to be a service
    - unit test
    - use unifiedjs, unist, mdast to generate overlay or even manipulate editor layer
    - Find xargs alternative. (replace with plain javascript string manipulation?)

  ** Dev experience and code health
    - handle js-yaml breaking changes

* DONE automate branch + tag based release git github CI/CD
* DONE Save a newly created file won't update metadata
* DONE cannot cancel child create handler
* DONE child create does not report to parent
* DONE :tag: is not a good syntax because it conflicts with timestamp -> replaced with #
* DONE save error when just saved a child note
* DONE suggest recently used tags
* DONE insert multiple tags from command option
* DONE tag search
* DONE use double columns to separate tags to avoid regex lookahead
* DONE hit enter in command is handled differently than open option
* DONE long title overflow command bar option
* DONE command bar code refactoring: componentize option handlers
* DONE child window creation and backtrack insertion
* DONE insert new node should not replace current window
* DONE Text area doesn't reveal cursor when hitting enter after a long string
* DONE new file should start with dirty state
* DONE separate capture url from insert url
* DONE show duplicated links when inserting url
* DONE convert all non-entity-crud controllers into post method handlers
* DONE Disentangle option update vs. execution
* DONE Handle Insert by url
* DONE onbeforeunload warn unsaved notes
* DONE open existing drafts creates unwanted history record
* DONE history record is creatd before content init
* DONE do not allow empty space inside tag. For example, "this is an url: https://..." shouldn't trigger a tag highlight
* DONE tagging system (need design)
* DONE tag filtering in search
* DONE parse and display :tag: anywhere in body
* DONE reference panel use up/down instead of tab to traverse list
* DONE trap app focus
* DONE fix command auto close
* DONE fix panel travel
* DONE package into single executable
* DONE capture new note from url using bookmarklet
* DONE support metadata field, e.g. url
* DONE grid layout for panels. Reduce gutter. float command bar. Colored status bar
* DONE show status on app launch
* DONE `fa` to save and sync all
* DONE git sync through shell script
* DONE ctrl backspace/delete is broken
* DONE handle movement key on boundaries (home)
* DONE insert to editor, instead of to clipboard
* DONE insert / directly, instead of to clipboard
* DONE fix link selection color defect
* DONE clean up cursor snapshot service
* DONE open link at point
* DONE compress history when there is no model change (skip all non-model change in the middle)
* DONE undo/redo on cursor move is broken 
* DONE replace contenteditable with textarea
* DONE cursor position in status bar
* DONE cutting doesn't work
* DONE cannot hit Enter in the middle of text (trimming too greedy)
* DONE Delete from end of line is broken
* DONE Handle enter, backspace, delete manually at semantic boundary
* DONE history does not include the last edit (cannot undo then redo)
* DONE manage cursor for undo redo
* DONE pasting is not managed by history
* DONE Defer formatting until file save
* DONE undo/redo manager
* DONE fix double pasting issue due to source format
* DONE handle paste formatting
* DONE use keyboard to open links (need tech design)
* DONE prevent accidental open when yanking from command 
* DONE use keyboard to switch between Header/Content/Ref (via command)
* DONE debug focus won't return on Escape during creating new note 
* DONE fix padding in content host
* DONE convert editor to be home page
* DONE convert capture to a command
* DONE show backlinks aside
* DONE more seamless handling of focus and selection restore
* DONE refactor title to be a component
* DONE fix source map (use standalone frontend)
* DONE an output display for UI feedback (status bar, minibuffer) - localStorage for multi-page app
* DONE refactor frontend to class based architecture
* DONE use "/" as leader key
* DONE / + n + s to save
* DONE insert link (minimum: a mechnisam to get ~[title](id)~ in the clipboard)
* DONE insert line-break with `enter` key
* DONE insert heading
* DONE heading indentation - handle empty case
* DONE use custom element to handle serialization of links to markdown text
* DONE render preview mode (need to decide ssr vs csr)
* DONE edit and save note (no wysiwyg)
* DONE create new note
* DONE switch to ts-node-dev and tsc for dev inner loop
* DONE keep search result on navigate back
* DONE show title in search
* DONE display title (with yaml frontmatter)


* How to handle reference (book, website, podcast)?
- if a book points existing ideas, link to them
- if a book generates multiple new idea, capture the book, then capture individual ideas, and point from book to those ideas
  - May require an "extra paragraph as idea" workflow